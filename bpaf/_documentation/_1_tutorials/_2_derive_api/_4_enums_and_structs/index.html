<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content=" "><title>bpaf::_documentation::_1_tutorials::_2_derive_api::_4_enums_and_structs - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="bpaf" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../../../../../static.files/storage-68b7e25d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../../../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../bpaf/index.html">bpaf</a><span class="version">0.9.20</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module _4_<wbr>enums_<wbr>and_<wbr>structs</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#parsing-structs-and-enums" title="Parsing structs and enums">Parsing structs and enums</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In bpaf::<wbr>_<wbr>documentation::<wbr>_<wbr>1_<wbr>tutorials::<wbr>_<wbr>2_<wbr>derive_<wbr>api</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../../index.html">bpaf</a>::<wbr><a href="../../../index.html">_documentation</a>::<wbr><a href="../../index.html">_1_tutorials</a>::<wbr><a href="../index.html">_2_derive_api</a></div><h1>Module <span>_4_enums_and_structs</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../../src/bpaf/_documentation.rs.html#1555">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p> </p>
<table width='100%' cellspacing='0' style='border: hidden;'><tr>
  <td style='width: 33%; text-align: left;'>
<p><a href="../_3_postpr/index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api::_3_postpr">← Transforming parsed values</a></p>
  </td>
  <td style='width: 34%; text-align: center;'>
<p><a href="../index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api">↑ Derive API tutorial ↑</a></p>
  </td>
  <td style='width: 33%; text-align: right;'>
<p><a href="../_5_generate/index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api::_5_generate">What gets generated →</a></p>
  </td>
</tr></table>
<h5 id="parsing-structs-and-enums"><a class="doc-anchor" href="#parsing-structs-and-enums">§</a>Parsing structs and enums</h5>
<p>To produce a struct bpaf needs for all the field parsers to succeed. If you are planning to use
it for some other purpose as well and want to skip them during parsing you can use <a href="../../../../fn.pure.html" title="fn bpaf::pure"><code>pure</code></a> to
fill in values in member fields and <code>#[bpaf(skip)]</code> on enum variants you want to ignore, see
combinatoric example in <a href="../../../../trait.Parser.html#method.last" title="method bpaf::Parser::last"><code>Parser::last</code></a>.</p>
<p>If you use <code>#[derive(Bpaf)]</code> on an enum parser will produce a variant for which all the parsers
succeed.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[derive(Debug, Clone, Bpaf)]
#[bpaf(options)]
</span><span class="kw">pub enum </span>Options {
    File {
        <span class="doccomment">/// Read input from a file
        </span>name: String,
    },

    Url {
        <span class="doccomment">/// Read input from URL
        </span>url: String,
        <span class="doccomment">/// Authentication method to use for the URL
        </span>auth_method: String,
    },
}

<span class="kw">fn </span>main() {
    <span class="macro">println!</span>(<span class="string">"{:?}"</span>, options().run())
}</code></pre></div>
<details><summary>Output</summary>
<p>Help message reflects mutually exclusive parts</p>
<div class='bpaf-doc'>
$ app --help<br>
<p><b>Usage</b>: <tt><b>app</b></tt> (<tt><b>--name</b></tt>=<tt><i>ARG</i></tt> | <tt><b>--url</b></tt>=<tt><i>ARG</i></tt> <tt><b>--auth-method</b></tt>=<tt><i>ARG</i></tt>)</p><p><div>
<b>Available options:</b></div><dl><dt><tt><b>    --name</b></tt>=<tt><i>ARG</i></tt></dt>
<dd>Read input from a file</dd>
<dt><tt><b>    --url</b></tt>=<tt><i>ARG</i></tt></dt>
<dd>Read input from URL</dd>
<dt><tt><b>    --auth-method</b></tt>=<tt><i>ARG</i></tt></dt>
<dd>Authentication method to use for the URL</dd>
<dt><tt><b>-h</b></tt>, <tt><b>--help</b></tt></dt>
<dd>Prints help information</dd>
</dl>
</p>
<style>
div.bpaf-doc {
    padding: 14px;
    background-color:var(--code-block-background-color);
    font-family: "Source Code Pro", monospace;
    margin-bottom: 0.75em;
}
div.bpaf-doc dt { margin-left: 1em; }
div.bpaf-doc dd { margin-left: 3em; }
div.bpaf-doc dl { margin-top: 0; padding-left: 1em; }
div.bpaf-doc  { padding-left: 1em; }
</style>
</div>
<p>At least one branch needs to succeed</p>
<div class='bpaf-doc'>
$ app <br>
<b>Error:</b> expected <tt><b>--name</b></tt>=<tt><i>ARG</i></tt> or <tt><b>--url</b></tt>=<tt><i>ARG</i></tt>, pass <tt><b>--help</b></tt> for usage information
<style>
div.bpaf-doc {
    padding: 14px;
    background-color:var(--code-block-background-color);
    font-family: "Source Code Pro", monospace;
    margin-bottom: 0.75em;
}
div.bpaf-doc dt { margin-left: 1em; }
div.bpaf-doc dd { margin-left: 3em; }
div.bpaf-doc dl { margin-top: 0; padding-left: 1em; }
div.bpaf-doc  { padding-left: 1em; }
</style>
</div>
<p>And in this example only one branch can succeed</p>
<div class='bpaf-doc'>
$ app --name Cargo.toml<br>
File { name: "Cargo.toml" }
</div>
<div class='bpaf-doc'>
$ app --url https://crates.io --auth-method digest<br>
Url { url: "https://crates.io", auth_method: "digest" }
</div>
<p>While both branches can succeed at once - only one will actually succeed and afetr that
parsing fails since there are unconsumed items</p>
<div class='bpaf-doc'>
$ app --url https://crates.io --auth-method digest --name Cargo.toml<br>
<b>Error:</b> <tt><b>--name</b></tt> cannot be used at the same time as <tt><b>--url</b></tt>
<style>
div.bpaf-doc {
    padding: 14px;
    background-color:var(--code-block-background-color);
    font-family: "Source Code Pro", monospace;
    margin-bottom: 0.75em;
}
div.bpaf-doc dt { margin-left: 1em; }
div.bpaf-doc dd { margin-left: 3em; }
div.bpaf-doc dl { margin-top: 0; padding-left: 1em; }
div.bpaf-doc  { padding-left: 1em; }
</style>
</div>
</details>
<p> </p>
<table width='100%' cellspacing='0' style='border: hidden;'><tr>
  <td style='width: 33%; text-align: left;'>
<p><a href="../_3_postpr/index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api::_3_postpr">← Transforming parsed values</a></p>
  </td>
  <td style='width: 34%; text-align: center;'>
<p><a href="../index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api">↑ Derive API tutorial ↑</a></p>
  </td>
  <td style='width: 33%; text-align: right;'>
<p><a href="../_5_generate/index.html" title="mod bpaf::_documentation::_1_tutorials::_2_derive_api::_5_generate">What gets generated →</a></p>
  </td>
</tr></table>
</div></details></section></div></main></body></html>